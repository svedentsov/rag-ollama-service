<#--
  Финальная, самая директивная и простая версия RAG-промпта.
  Структура "Контекст -> Вопрос -> Приказ" является наиболее эффективной
  для задач извлечения точного ответа (Question Answering).
-->
<#-- ШАГ 1: Предоставление всего доступного контекста -->
Используй ТОЛЬКО следующий контекст для ответа на вопрос.

<context>
  <#if documents?has_content>
    <#list documents as doc>
      <document source="${(doc.metadata.source)!"Unknown"}">
        ${doc.text!"[пустое содержимое]"}
      </document>
    </#list>
  <#else>
    <no_documents_found />
  </#if>
</context>

<#-- ШАГ 2: Формулировка вопроса пользователя -->
Вопрос: "${question!"[пустой вопрос]"}"

<#-- ШАГ 3: Прямой и недвусмысленный приказ -->
Твоя задача: Дай прямой и точный ответ на вопрос, извлекая факты ИСКЛЮЧИТЕЛЬНО из предоставленного выше контекста.
Если контекст не содержит ответа, напиши: "Я не нашел информации по вашему вопросу в базе знаний."
НЕ придумывай ничего. Цитируй источник в формате [источник: ...].