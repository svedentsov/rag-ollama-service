package com.example.ragollama.rag.advisors;

import com.example.ragollama.rag.model.RagContext;
import reactor.core.publisher.Mono;

/**
 * Асинхронный функциональный интерфейс для реализации паттерна "Советник" (Advisor).
 * <p>
 * Каждый советник представляет собой отдельный, независимый и переиспользуемый
 * компонент бизнес-логики. В этой версии интерфейс полностью асинхронный
 * и возвращает {@link Mono}, что позволяет выполнять неблокирующие I/O-операции
 * (например, вызовы внешних API) внутри советников без блокировки основного потока.
 */
@FunctionalInterface
public interface RagAdvisor {
    /**
     * Асинхронно применяет свою логику к контексту RAG-запроса.
     *
     * @param context Текущий контекст запроса, содержащий документы,
     *                оригинальный запрос и модель промпта.
     * @return {@link Mono}, который по завершении будет содержать
     * модифицированный контекст для следующего советника в цепочке.
     */
    Mono<RagContext> advise(RagContext context);
}
